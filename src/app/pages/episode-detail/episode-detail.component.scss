@import "../../../styles/variables";
@import "../../../styles/spacing";
@import "../../../styles/mixins";

// page header styles ---------------------------------------------------------------
@import "../../../styles/component/page-header";

// header icon
.bookmark-icon {
  font-size: 16px;
  margin-left: $spacing-4;
}

// detail section styles ------------------------------------------------------------
section.episode-detail-wrapper {
}

// header section --------------------------------------------------------------------
.detail-header {
  .cover-image {
    @include apply-styles-until('xs') {
      width: 100%;
      height: 220px;
      position: relative;
      overflow: visible;
    }

    @include apply-styles-between('xs', 'md') {
      width: 100%;
      height: 220px;
      position: relative;
      overflow: visible;
    }

    @include apply-styles-between('md', 'lg') {
      width: 100%;
      height: 220px;
      position: relative;
      overflow: visible;
    }

    @include apply-styles-from('lg') {
      width: 100%;
      height: auto;
    }

    img {
      object-fit: cover;
      object-position: center center;
      padding: 0;

      @include apply-styles-until('xs') {
        position: absolute;
        width: calc(100% + 2rem);
        height: 220px;
        left: -$spacing-3;
        right: -$spacing-3;
        top: auto;
        bottom: auto;
        margin: auto;
        border-radius: 0 0 $spacing-3 $spacing-3;
      }

      @include apply-styles-between('xs', 'md') {
        position: absolute;
        width: calc(100% + 2rem);
        height: 220px;
        left: -$spacing-3;
        right: -$spacing-3;
        top: auto;
        bottom: auto;
        margin: auto;
        border-radius: 0 0 $spacing-3 $spacing-3;
      }

      @include apply-styles-between('md', 'lg') {
        position: absolute;
        width: calc(100% + 2rem);
        height: 220px;
        left: -$spacing-3;
        right: -$spacing-3;
        top: auto;
        bottom: auto;
        margin: auto;
        border-radius: 0 0 $spacing-3 $spacing-3;
      }

      @include apply-styles-from('lg') {
        width: 100%;
        height: 220px;
        margin: 0;
      }
    }
  }

  .header-info-wrapper {
    position: relative;

    @include apply-styles-until('xs') {
      padding: $spacing-2 $spacing-0;

      @include d-flex(
        $direction: column,
        $justify: flex-start,
        $align: flex-start,
        $gap: $spacing-2
      );
    }

    @include apply-styles-between('xs', 'md') {
      @include d-flex(
        $direction: column,
        $justify: flex-start,
        $align: flex-start,
        $gap: $spacing-2
      );
    }

    @include apply-styles-between('md', 'lg') {
      margin-top: -150px;
      padding: $spacing-3 $spacing-3;
      @include d-flex(
        $direction: row,
        $justify: flex-start,
        $align: flex-end,
        $gap: $spacing-3
      );
    }

    @include apply-styles-from('md') {
      margin-top: -80px;
      padding: $spacing-4;
      @include d-flex(
        $direction: row,
        $justify: flex-start,
        $align: flex-end,
        $gap: $spacing-3
      );
    }

    .episode-thumbnail {
      height: auto;
      aspect-ratio: 3 / 4;
      object-fit: cover;
      object-position: center center;
      border-radius: $spacing-3;

      @include apply-styles-until('xs') {
        position: absolute;
        width: 80px;
        top: -50px;
      }

      @include apply-styles-between('xs', 'md') {
        position: absolute;
        width: 80px;
        top: -50px;
      }

      @include apply-styles-from('md') {
        width: 120px;
      }
    }

    .episode-info-wrapper {
      width: 100%;
      height: fit-content;
      min-height: 100px;

      @include apply-styles-until('xs') {
        @include d-flex($direction: column, $justify: center, $align: center, $gap: $spacing-4);
      }

      @include apply-styles-between('xs', 'md') {
        @include d-flex($direction: column, $justify: center, $align: center, $gap: $spacing-4);
      }

      @include apply-styles-between('md', 'lg') {
        @include d-flex($direction: column, $justify: flex-start, $align: flex-start, $gap: $spacing-2);
      }

      @include apply-styles-from('lg') {
        @include d-flex($direction: row, $justify: flex-start, $align: center, $gap: $spacing-3);
      }

      .episode-title {
        margin: 0;
        padding: 0;
        text-align: left;

        @include apply-styles-until('xs') {
          @include font-primary($size: 18px, $weight: $font-weight-light);
          padding-left: 100px;
          width: 100%;
          text-align: left;
        }

        @include apply-styles-between('xs', 'md') {
          @include font-primary($size: 18px, $weight: $font-weight-light);
          padding-left: 100px;
          width: 100%;
          text-align: left;
        }

        @include apply-styles-between('md', 'lg') {
          @include font-primary($size: 18px, $weight: $font-weight-light);
        }

        @include apply-styles-from('md') {
          @include font-primary($size: 20px, $weight: $font-weight-light);
          flex-grow: 1;
        }
      }

      .episode-meta {
        @include apply-styles-until('xs') {
          @include d-flex(
            $direction: row,
            $align: center,
            $justify: center,
            $gap: $spacing-2,
            $wrap: wrap,
          );
        }

        @include apply-styles-between('xs', 'md') {
          @include d-flex(
            $direction: row,
            $align: center,
            $justify: flex-end,
            $gap: $spacing-2
          );
        }

        @include apply-styles-between('md', 'lg') {
          width: 100%;
          @include d-flex(
            $direction: row,
            $align: center,
            $justify: flex-end,
            $gap: $spacing-2
          );
        }

        @include apply-styles-from('lg') {
          @include d-flex(
            $direction: row,
            $align: center,
            $justify: flex-end,
            $gap: $spacing-2
          );
        }

        .episode-rating,
        .episode-code,
        .episode-date,
        .episode-duration {
          opacity: 0.6;

          @include apply-styles-until('xs') {
            @include font-primary($size: 12px, $weight: $font-weight-light);
            white-space: nowrap;
            @include d-flex(
              $direction: row,
              $align: center,
              $justify: flex-start,
              $gap: $spacing-2
            );
          }

          @include apply-styles-between('xs', 'md') {
            @include font-primary($size: 12px, $weight: $font-weight-light);
            white-space: nowrap;
            @include d-flex(
              $direction: row,
              $align: center,
              $justify: flex-start,
              $gap: $spacing-2
            );
          }

          @include apply-styles-between('md', 'lg') {
            @include font-primary($size: 12px, $weight: $font-weight-light);
            white-space: nowrap;
            @include d-flex(
              $direction: row,
              $align: center,
              $justify: flex-start,
              $gap: $spacing-2
            );
          }

          @include apply-styles-from('lg') {
            @include d-flex(
              $direction: row,
              $align: center,
              $justify: flex-start,
              $gap: $spacing-2
            );
          }

          svg {
            @include apply-styles-until('xs') {
              width: 14px;
              height: 14px;
              flex-shrink: 0;
            }

            @include apply-styles-between('xs', 'md') {
              width: 14px;
              height: 14px;
              flex-shrink: 0;
            }

            @include apply-styles-between('md', 'lg') {
              width: 14px;
              height: 14px;
              flex-shrink: 0;
            }

            @include apply-styles-from('lg') {
              width: 16px;
              height: 16px;
              flex-shrink: 0;
            }

            * {
              stroke: #ffffff;
            }
          }
        }

        .separator {
          width: 1px;
          background-color: $white;
          opacity: 0.6;

          @include apply-styles-until('xs') {
            height: 14px;
          }

          @include apply-styles-between('xs', 'md') {
            height: 14px;
          }

          @include apply-styles-between('md', 'lg') {
            height: 14px;
          }

          @include apply-styles-from('lg') {
            height: 24px;
          }
        }

        .episode-rating {
          color: #f88401;
          opacity: 1 !important;
          padding: $spacing-3 $spacing-3;
          cursor: pointer;
          user-select: none;
          border-radius: $spacing-3;

          @include apply-styles-until('xs') {
            display: none;
          }

          @include apply-styles-between('xs', 'md') {
            display: none;
          }

          @include apply-styles-between('md', 'lg') {
            margin-left: auto;
          }

          @include apply-styles-from('lg') {
            margin-left: $spacing-5;
          }

          &:hover {
            background-color: transparentize($accent-yellow-color, 0.9);
            transition: all ease-in 0.3s;
          }

          svg {
            color: #f88401;

            * {
              stroke: #f88401;
            }
          }
        }
      }
    }
  }
}

// tab view --------------------------------------------------------------------------
.info-tab-view {
  @include d-flex($direction: row, $justify: flex-start, $align: center);
  width: 100%;
  margin-bottom: $spacing-4;

  @include apply-styles-until('xs') {
    overflow-x: auto;
  }

  @include apply-styles-between('xs', 'md') {
    overflow-x: auto;
  }

  @include apply-styles-between('md', 'lg') {
    overflow-x: auto;
  }

  @include apply-styles-from('md') {

  }

  button.tab-button {
    width: fit-content;
    height: fit-content;
    background-color: transparent;
    position: relative;
    color: transparentize($color: $white, $amount: 0.4);
    border-radius: $spacing-2;
    border: 0 solid transparent;
    margin: 0;
    cursor: pointer;
    transition: all 0.5s ease;

    @include apply-styles-until('xs') {
      @include font-primary(14px, $font-weight-light, $line-height-tight);
      padding: $spacing-2 $spacing-3;
    }

    @include apply-styles-between('xs', 'md') {
      @include font-primary(14px, $font-weight-light, $line-height-tight);
      padding: $spacing-3;
    }

    @include apply-styles-between('md', 'lg') {
      @include font-primary(16px, $font-weight-light, $line-height-tight);
      padding: $spacing-3 $spacing-4;
    }

    @include apply-styles-from('lg') {
      @include font-primary(18px, $font-weight-light, $line-height-tight);
      padding: $spacing-3 $spacing-4;
    }

    &.active {
      color: $white;
    }

    &:hover::after,
    &.active::after {
      width: 100%;
      left: 0;
      right: auto;
      transition: all 0.5s ease;
    }

    $underline-thickness: 4px;

    &:after {
      content: "";
      position: absolute;
      bottom: 0;
      left: auto;
      width: 0;
      opacity: 0.3;
      height: $underline-thickness;
      border-radius: $underline-thickness;
      background-color: rgba(255, 255, 255, 0.5);
    }
  }
}

// character list styles -------------------------------------------------------------
.characters-list {
  display: grid;
  grid-auto-rows: auto;
  gap: $spacing-4;

  @include apply-styles-until('xs') {
    grid-template-columns: repeat(2, 1fr);
  }

  @include apply-styles-between('xs', 'sm') {
    grid-template-columns: repeat(2, 1fr);
  }

  @include apply-styles-between('sm', 'md') {
    grid-template-columns: repeat(3, 1fr);
  }

  @include apply-styles-between('md', 'lg') {
    grid-template-columns: repeat(3, 1fr);
  }

  @include apply-styles-from('lg') {
    grid-template-columns: repeat(5, 1fr);
  }
}

// rating modal ----------------------------------------------------------------------
.rating-modal-container {
  width: 100vw;
  height: 100vh;
  position: fixed;
  top: 0;
  z-index: 1040;
  background-color: transparentize($primary-color, 0.9);
  backdrop-filter: blur(100px);
  @include d-flex($direction: row, $justify: center, $align: flex-end);
}

.rating-modal {
  width: 40vw;
  background-color: white;
  padding: $spacing-5 $spacing-5;
  border-radius: $spacing-4 $spacing-4 0 0;

  .rating-modal-content {
    position: relative;
    @include d-flex($direction: column, $justify: center, $align: center);

    .rating-modal-close {
      position: absolute;
      margin: auto;
      left: auto;
      right: 0;
      top: 0;
      bottom: auto;
      transform: translate(80%, -80%);
      transform-origin: center;
      background-color: transparent;
      border: 0 solid transparent;
      @include d-flex($direction: row, $justify: center, $align: center);
      width: 52px;
      height: 52px;
      border-radius: $spacing-3;
      cursor: pointer;

      &:hover {
        background-color: transparentize($primary-color, 0.9);
      }
    }

    .rating-modal-title {
      @include font-primary($size: 26px, $weight: $font-weight-light);
      color: $primary-color;
      text-align: center;
      width: 100%;
      margin: 0;
    }

    .rating-modal-score {
      @include font-primary($size: 52px, $weight: $font-weight-light);
      color: $primary-color;
      text-align: center;
      width: 100%;
      margin: 0;
    }

    .rating-modal-slider-container {
      width: 100%;
      height: fit-content;
      padding: $spacing-3;

      $rating-track-color: #D9DBE9;

      input[type="range"] {
        width: 100%;
        -webkit-appearance: none;
        appearance: none;
        background: transparent;
        cursor: pointer;

        &::-webkit-slider-runnable-track {
          background: $rating-track-color;
          border-radius: $spacing-3;
          height: 14px;
        }

        &::-moz-range-track {
          background: $rating-track-color;
          border-radius: $spacing-3;
          height: 12px;
        }

        &::-webkit-slider-thumb {
          -webkit-appearance: none;
          appearance: none;
          margin-top: -8px;
          background-color: $accent-yellow-color;
          border-radius: $spacing-5;
          height: 32px;
          width: 32px;
        }
      }

    }

    button.rating-modal-submit {
      background-color: $accent-blue-color;
      color: $white;
      width: 300px;
      border: 0 solid transparent;
      border-radius: 50px;
      padding: $spacing-3 $spacing-5;
      text-align: center;
      @include font-primary($size: 24px, $weight: $font-weight-light);
      cursor: pointer;

      &:hover {
        background-color: darken($accent-blue-color, 5%);
      }
    }
  }
}
